<HEAD>
<TITLE>G3D Source Distribution</TITLE>
</HEAD>

<BODY>
<IMG SRC="source/html/G3D.gif" ALIGN=LEFT>
This document describes the structure of the source distribution for
the graphics3D C++ library (G3D).  This distribution contains all of
the files you need to <I>build</I> the library on Windows or Linux.
It is assumed that you obtained this source by checking it out of
SourceForge.net CVS for the "g3d-cpp" project (<A
HREF="http://sourceforge.net/projects/g3d-cpp">http://sourceforge.net/projects/g3d-cpp</A>).
If you obtained it by some other means, you should get the latest
version directly from CVS.

<P><B>If you are just want to <I>use</I> the library on Windows, you don't need
the files refered to in this document.</B>  Download
the latest precompiled binary (<CODE>g3d-?_??.zip</CODE>) from <A HREF="http://sourceforge.net/project/showfiles.php?group_id=76879">http://sourceforge.net/project/showfiles.php?group_id=76879</A> and follow the installation instructions on <A HREF="http://www.graphics3d.com/cpp">graphics3d.com</A>.

<P>To build the library, you need to have installed <A
HREF="http://www.doxygen.org">Doxygen 1.3</A>, <A
HREF="http://www.python.org">Python 2.0</A>, <A
HREF="http://www.libsdl.org">SDL 1.2.x</A>, OpenGL 1.3, automake 1.6,
autoconf 2.13, and either MSVC++ 6.0 (Windows) or g++ 3.2 (Linux).
G3D is endian and architecture independent but is not supported for
non-x86 platforms.


<P>To build the library on <B>Windows</B>:
<OL>
<LI> Install the libraries listed above.  The Cygwin versions of doxygen and
python may not execute correctly from a command prompt, so you may
have to download and install them separately if you have Cygwin.

<LI> Add doxygen, python, and msvc executables to your PATH environment variable.  These are usually <CODE>C:\Program Files\Microsoft Visual
Studio\Common\MSDev98\Bin\</CODE>, <CODE>c:\doxygen</CODE>, <CODE>c:\python\bin</CODE>.  

<LI>Run "<CODE>build install</CODE>" in the <CODE>cpp</CODE> directory

<LI>Copy the resulting <CODE>cpp/install</CODE> directory to wherever you install libraries.  You no longer need the source tree.
</OL>

<P>To build the library on <B>Linux and OS/X</B>:
<OL>

<LI> Install the libraries listed above.
<LI> Ensure that doxygen, python, and gcc are in your PATH environment variable
<LI>Run <CODE>"chmod u+x build"</CODE> and "<CODE>./build install</CODE>" or "<CODE>./build install</CODE>" in the <CODE>cpp</CODE> directory
<LI>TODO: set up LD_LIBRARY_PATH
<LI>The library and demos will compile in the source tree
<LI>TODO: where are they?
</OL>

<P>Targets for making a release distribution
(a.k.a. g3d-cpp-?_??.zip), which should only be done by the G3D team
at Brown, are described below.

<H1>Directories</H1>
You are at the root of the directory tree for G3D (which is
referred to as "cpp" in this document).  The subdirectories have
the following structure:

<PRE>
<CODE>cpp</CODE>
 |-<CODE>source</CODE>
 |  |-<CODE>demos</CODE>
 |  |-<CODE>G3Dcpp</CODE>
 |  |-<CODE>GLG3Dcpp</CODE>
 |  |-<CODE>IJG</CODE>
 |  |-<CODE>html</CODE>
 |  |-<CODE>include</CODE>
 |  |  |-<CODE>G3D</CODE>
 |  |  |-<CODE>GLG3D</CODE>
 |  |  '-<CODE>glh</CODE>                     <FONT COLOR="00700">The latest GL extensions.  G3D doesn't use the system GL headers.</FONT>
 |  |     |-<CODE>extgen</CODE>
 |  |     '-<CODE>GL</CODE>
 |  |-<CODE>lib</CODE>
 |  '-<CODE>test</CODE>
 |-<CODE>data</CODE>
 |-<FONT COLOR="#C00000"><CODE>install</CODE></FONT>                       <FONT COLOR="#007000">The library ready for use</FONT>
 |-<FONT COLOR="#C00000"><CODE>release</CODE></FONT>                       <FONT COLOR="#007000">Official G3D release zipfiles (only Morgan needs these)</FONT>
 '-<FONT COLOR="#C00000"><CODE>temp</CODE></FONT>
</PRE>

The red directories can be deleted; they are built from the
source directory.  Some subdirectories are not shown.
<P>

In the distribution, the <CODE>cpp/data</CODE> directory is stored in
g3d-data-M_mm.zip and the other (built) files are in g3d-cpp-M_mm.zip.
They are separated because the data is so large.  Users who want
source code can download it from CVS following the instructions 
at <AHREF="http://sourceforge.net/cvs/?group_id=76879">http://sourceforge.net/cvs/?group_id=76879</A>

<P>
<H1>Meta-Build targets</H1>
<H3>build install</H3>

<I>Builds a local installation for using the library.  This is how
Linux users generate the .so's to link against.</I>

<H3>build release (Windows only)</H3> 

<I>Builds install, then zips g3d-cpp-M_mm.zip and g3d-data-M_mm.zip 
for uploading to Brown/G3D for users.  To make a release, you must
have already done 'build install' on Linux and copied the binaries
over.  Note that the demos go in the data zipfile, not the cpp zipfile.
Also, note that the release process actually deletes the demos
and data from the install directory.</I>

<H3>build clean</H3>
<OL>
<LI>Remove <CODE>cpp/temp</CODE>
<LI>Remove <CODE>cpp/install</CODE>
<LI>Remove <CODE>cpp/release</CODE>
</OL>

<P>
<H1>Build Targets</H1>

The build script is a Python script that is executed from a shell
script.  It accepts a single argument which is the name of the build
target.  Specifications for the targets follow.  The next section of
this document describes the meta-targets for making a release.

<H3>lib</H3>
<OL>
<LI>Build <CODE>cpp/build/lib/G3D.lib</CODE>, 
          <CODE>cpp/build/lib/G3D-debug.lib</CODE>,
          <CODE>cpp/build/lib/GLG3D.lib</CODE>,
          <CODE>cpp/build/lib/GLG3D-debug.lib</CODE> 
          (or corresponding .a files on Linux)
<LI>Copy any out of date files from <CODE>cpp/source/lib</CODE> to <CODE>cpp/build/lib</CODE>
</OL>


<H3>doc</H3>
<OL>
<LI>Execute doxygen in <CODE>cpp/source</CODE>
<LI>Copy any out of date files from cpp/source/html to cpp/build/html
</OL>

<H3>test</H3>
<OL>
<LI>Compile cpp/source/test/*.cpp to cpp/temp/test/Debug/Test.exe
<LI>Execute cpp/temp/test/Debug/Test.exe
<LI>Complain if the exit code was non-zero
</OL>


<HR WIDTH=50%>
<P>
<A NAME="#ALLFILES"></A><B>*</B> "All files" refers to
any file <I>except</I> those matching the following regular expressions:
<P>
<CODE>
    '\.ncb$', 
    '\.opt$', 
    '\.ilk$', 
    '\.pdb$', 
    '\.bsc$', 
    '\.o$', 
    '\.obj$', 
    '\.pyc$', 
    '\.plg$', 
    '^#.*#$', 
    '~$', 
    '^log.txt$', 
    '^stderr.txt$', 
    '^stdout.txt$', 
    '\.log$', 
    '^graveyard$', 
    '^CVS$', 
     '^Debug$', 
    '^Release$' </CODE>
</UL>

<P>

</BODY>

