<HEAD>
<TITLE>G3D Source Distribution</TITLE>
</HEAD>

<BODY>
<H1>Building G3D</H1>

<A HREF="http://www.graphics3d.com"><IMG SRC="source/html/G3D.gif" ALIGN=RIGHT BORDER=0></A>
This document describes the structure of the source distribution for
the G3D C++ library.  It is for programmers who need to modify the
library itself.  

<P>
<B>Windows programmers who do not need to modify the
library should download precompiled binaries and link against them</B>
instead of building the library themselves because building the library
requires you to install several tools.
<P>

This distribution contains two CVS modules: <B>cpp</B> and <B>data</B>.
Together these have all of
the files you need to <I>build</I> and install the library on Windows or Linux.
It is assumed that you obtained this source by checking it out of
SourceForge.net CVS for the "g3d-cpp" project (<A
HREF="http://sourceforge.net/projects/g3d-cpp">http://sourceforge.net/projects/g3d-cpp</A>)
or downloading a release zipfile.  To check out via anonymous CVS:

<PRE>
cvs -d:pserver:anonymous@cvs.sourceforge.net:/cvsroot/g3d-cpp login 
cvs -z3 -d:pserver:anonymous@cvs.sourceforge.net:/cvsroot/g3d-cpp co cpp
cvs -z3 -d:pserver:anonymous@cvs.sourceforge.net:/cvsroot/g3d-cpp co data
</PRE>


<HR>
<B><FONT SIZE=6><IMG SRC="source/html/win32.gif" VALIGN=CENTER> Windows 2000 or XP</FONT></B>
<P>


<P>
<I> The Cygwin versions of doxygen and python do not execute correctly
from a Windows command prompt, so you will have to download and
install them separately if you have Cygwin.</I>

<OL>

<LI> Install Microsoft Visual Studio 6.0.
<LI> Install the <A HREF="http://download.microsoft.com/download/vstudio60ent/SP5/Wideband-Full/WIN98Me/EN-US/vs6sp5.exe">Visual Studio 6.0 Service Pack 5</A>.
<LI> Install the <A HREF="http://download.microsoft.com/download/vb60ent/Update/6/W9X2KXP/EN-US/vcpp5.exe">Visual Studio 6.0 Processor Pack</A>.
<LI> Install the <A HREF="http://www.python.org/ftp/python/2.2.3/Python-2.2.3.exe">Python 2.2.3 tool</A>.
<LI> Install the <A HREF="ftp://ftp.stack.nl/pub/users/dimitri/doxygen-1.3.2-setup.exe">Doxygen 1.3.2 tool</A>.
<LI> Install the <A HREF="http://www.libsdl.org/release/SDL-devel-1.2.5a-VC6.zip">SDL 1.2.5 Development Library</A>.

<LI> Add the paths for these tools to your PATH environment variable (Control Panel -> System -> Advanced -> Environment Variables).  These are usually <CODE>C:\Program Files\Microsoft Visual
Studio\Common\MSDev98\Bin\;c:\doxygen;c:\python\bin</CODE>.
<LI> Log out so all changes can take effect.
<P>


<LI>Run "<CODE>build install</CODE>" in the <CODE>cpp</CODE> directory

<LI>Copy the contents of the <CODE>cpp/install</CODE> directory to wherever
you install libraries.  You no longer need the source tree.

</OL>

<HR>
<B><FONT SIZE=6><IMG SRC="source/html/linux.gif" VALIGN=CENTER> Linux</FONT></B>
<P>
<OL>
<LI> Install <A HREF="ftp://ftp.thewrittenword.com/packages/by-name/gcc-3.3/i686-pc-linux-gnu/gcc-3.3.rpm4.tar.Z">gcc 3.3</A>.
<LI> Install the <A HREF="http://www.python.org/ftp/python/2.2.3/rpms/python-2.2.3-26.src.rpm">Python 2.2.3 tool</A>.
<LI> Install the <A HREF="ftp://ftp.stack.nl/pub/users/dimitri/doxygen-1.3.2.linux.bin.tar.gz">Doxygen 1.3.2 tool</A>.
<LI> Install the <A HREF="http://www.libsdl.org/release/SDL-devel-1.2.5-1.i386.rpm">SDL 1.2.5 Development Library</A>.
<LI> Install the <A HREF="http://ftp.gnu.org/gnu/automake/automake-1.7.5.tar.gz">automake 1.7.5</A> tool (and the corresponding aclocal version).
<LI> Install the <A HREF="http://ftp.gnu.org/gnu/autoconf/autoconf-2.57.tar.gz">autoconf 2.57</A> tool.
<LI> Add the paths for these tools to your PATH environment variable (usually in your .cshrc, .tcshrc, or .bashrc file).

<LI>TODO: set up LD_LIBRARY_PATH

<LI> Log out so all changes can take effect.
<P>
<LI>Run "<CODE>chmod u+x build</CODE>" in the <CODE>cpp</CODE> directory.
<LI>Run "<CODE>./build install</CODE>" in the <CODE>cpp</CODE> directory
<LI>The library and demos will compile in the source tree
</OL>

<HR>
<B><FONT SIZE=6><IMG SRC="source/html/osx.gif" VALIGN=CENTER> OS X</FONT></B>

<P>
<I>The OS X build infrastructure is currently under construction.</I>
<P>
<OL>
<LI> <I>gcc 3.1 came with your operating system.  There is no newer version for OS X</I>
<LI> Install the <A HREF="http://www.cwi.nl/ftp/jack/python/mac/MacPython222active.bin">Python 2.2.2 tool</A>.
<LI> Install the <A HREF="ftp://ftp.stack.nl/pub/users/dimitri/doxygen-1.3-rc3.macosx.bin.tar.gz">Doxygen 1.3.2 tool</A>.
<LI> Install the <A HREF="http://www.libsdl.org/release/SDL-devel-1.2.5.pkg.tar.gz">SDL 1.2.5 Development Library</A>.
<LI> Install the <A HREF="http://ftp.gnu.org/gnu/automake/automake-1.7.5.tar.gz">automake 1.7.5</A> tool (and the corresponding aclocal version).
<LI> Install the <A HREF="http://ftp.gnu.org/gnu/autoconf/autoconf-2.57.tar.gz">autoconf 2.57</A> tool.
<LI> Add the paths for these tools to your PATH environment variable (usually in your .cshrc, .tcshrc, or .bashrc file).

<LI>TODO: set up LD_LIBRARY_PATH

<LI> Log out so all changes can take effect.
<P>
<LI>Run "<CODE>chmod u+x build</CODE>" in the <CODE>cpp</CODE> directory.
<LI>Run "<CODE>./build install</CODE>" in the <CODE>cpp</CODE> directory
<LI>The library and demos will compile in the source tree
</OL>

<HR>
<H1>Directories</H1>
You are at the root of the directory tree for G3D (which is
referred to as "cpp" in this document).  This is a CVS checkout
of the <B>cpp</B> module.  The <CODE>../data</CODE> directory contains
a checkout of the <B>data</B> directory.   The subdirectories have
the following structure:

<PRE>
|-<CODE>cpp</CODE>
|  |-<CODE>source</CODE>
|  |  |-<CODE>demos</CODE>
|  |  |-<CODE>G3Dcpp</CODE>
|  |  |-<CODE>GLG3Dcpp</CODE>
|  |  |-<CODE>IJG</CODE>
|  |  |-<CODE>html</CODE>
|  |  |-<CODE>include</CODE>
|  |  |  |-<CODE>G3D</CODE>
|  |  |  |-<CODE>GLG3D</CODE>
|  |  |  '-<CODE>glh</CODE>                     <FONT COLOR="00700">The latest GL extensions.  G3D doesn't use the system GL headers.</FONT>
|  |  |     |-<CODE>extgen</CODE>
|  |  |     '-<CODE>GL</CODE>
|  |  |-<CODE>lib</CODE>
|  |  '-<CODE>test</CODE>
|  |-<FONT COLOR="#C00000"><CODE>install</CODE></FONT>                       <FONT COLOR="#007000">The library ready for use (copy to the location of your choice)</FONT>
|  |-<FONT COLOR="#C00000"><CODE>release</CODE></FONT>                       <FONT COLOR="#007000">Official G3D release zipfiles (only Morgan needs these)</FONT>
|  '-<FONT COLOR="#C00000"><CODE>temp</CODE></FONT>
'-<CODE>data</CODE>
   |-<CODE>font</CODE>
   |-<CODE>quake</CODE>
   ...
</PRE>

The red directories can be deleted; they are built from the
source directory.  Some subdirectories are not shown.
<P>

In the distribution, the <CODE>cpp/data</CODE> directory is stored in
g3d-data-M_mm.zip and the other (built) files are in g3d-cpp-M_mm.zip.
They are separated because the data is so large.  Users who want
source code can download it from CVS following the instructions 
at <AHREF="http://sourceforge.net/cvs/?group_id=76879">http://sourceforge.net/cvs/?group_id=76879</A>

<P>
<H1>Meta-Build targets</H1>
<H3>build install</H3>

<I>Builds a local installation for using the library.  This is how
Linux users generate the .so's to link against.</I>

<H3>build release (Windows only)</H3> 

<I>Builds install, then zips g3d-cpp-M_mm.zip and g3d-data-M_mm.zip 
for uploading to Brown/G3D for users.  To make a release, you must
have already done 'build install' on Linux and copied the binaries
over.  Note that the demos go in the data zipfile, not the cpp zipfile.
Also, note that the release process actually deletes the demos
and data from the install directory.</I>

<H3>build clean</H3>
<OL>
<LI>Remove <CODE>cpp/temp</CODE>
<LI>Remove <CODE>cpp/install</CODE>
<LI>Remove <CODE>cpp/release</CODE>
</OL>

<P>
<H1>Build Targets</H1>

The build script is a Python script that is executed from a shell
script.  It accepts a single argument which is the name of the build
target.  Specifications for the targets follow.  The next section of
this document describes the meta-targets for making a release.

<H3>lib</H3>
<OL>
<LI>Build <CODE>cpp/install/lib/G3D.lib</CODE>, 
          <CODE>cpp/install/lib/G3D-debug.lib</CODE>,
          <CODE>cpp/install/lib/GLG3D.lib</CODE>,
          <CODE>cpp/install/lib/GLG3D-debug.lib</CODE> 
          (or corresponding .a/.so files on Linux)
<LI>Copy any out of date files from <CODE>cpp/source/lib</CODE> to <CODE>cpp/install/lib</CODE>
</OL>


<H3>doc</H3>
<OL>
<LI>Execute doxygen in <CODE>cpp/source</CODE>
<LI>Copy any out of date files from cpp/source/html to cpp/build/html
</OL>

<H3>test</H3>
<OL>
<LI>Compile cpp/source/test/*.cpp to cpp/temp/test/Debug/Test.exe
<LI>Execute cpp/temp/test/Debug/Test.exe
<LI>Complain if the exit code was non-zero
</OL>


<HR WIDTH=50%>
<P>
<A NAME="#ALLFILES"></A><B>*</B> "All files" refers to
any file <I>except</I> those matching the following regular expressions:
<P>
<CODE>
    '\.ncb$', 
    '\.opt$', 
    '\.ilk$', 
    '\.pdb$', 
    '\.bsc$', 
    '\.o$', 
    '\.obj$', 
    '\.pyc$', 
    '\.plg$', 
    '^#.*#$', 
    '~$', 
    '^log.txt$', 
    '^stderr.txt$', 
    '^stdout.txt$', 
    '\.log$', 
    '^graveyard$', 
    '^CVS$', 
     '^Debug$', 
    '^Release$' </CODE>
</UL>

<P>

</BODY>

